<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>estarlinhacks V2.5 | ELITE PANEL</title>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-auth-compat.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@500;700&display=swap');
        :root { --neon: #00f2ff; --accent: #ff0055; --bg: #020205; --card: rgba(255,255,255,0.03); }
        body { background: var(--bg); color: white; font-family: 'Rajdhani', sans-serif; margin: 0; overflow-x: hidden; }
        
        /* HEADER PROFESIONAL */
        .header-v2 { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; background: rgba(0,0,0,0.95); border-bottom: 2px solid var(--neon); position: sticky; top:0; z-index: 100; }
        .logo { font-family: 'Orbitron'; font-size: 1.1rem; color: var(--neon); text-shadow: 0 0 10px var(--neon); }
        .config-btn { font-size: 1.5rem; cursor: pointer; color: var(--neon); }

        /* MEN√ö LATERAL CONFIGURACI√ìN */
        #sidebar { position: fixed; top: 0; right: -100%; width: 300px; height: 100%; background: rgba(5,5,15,0.98); backdrop-filter: blur(15px); border-left: 2px solid var(--neon); transition: 0.4s; z-index: 1000; padding: 20px; box-sizing: border-box; }
        #sidebar.active { right: 0; }
        .menu-link { display: block; padding: 15px; color: white; text-decoration: none; border-bottom: 1px solid rgba(255,255,255,0.05); font-weight: bold; }
        .menu-link:hover { color: var(--neon); background: rgba(255,255,255,0.02); }

        /* DASHBOARD */
        .dashboard { padding: 20px; }
        .balance-card { background: var(--card); padding: 30px; border-radius: 25px; border: 1px solid rgba(0,242,255,0.1); text-align: center; }
        .val { font-family: 'Orbitron'; font-size: 2.5rem; color: var(--neon); margin: 10px 0; }

        /* MODAL Y FORMULARIO */
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 2000; padding: 20px; overflow-y: auto; }
        .modal-box { background: #0a0a10; border: 1px solid var(--neon); border-radius: 25px; padding: 25px; max-width: 450px; margin: 20px auto; }
        input, select, .file-input { width: 100%; padding: 12px; margin: 10px 0; background: #000; color: white; border: 1px solid #333; border-radius: 10px; box-sizing: border-box; }
        
        /* BOTONES */
        .buy-btn { width: 100%; padding: 15px; background: linear-gradient(45deg, var(--neon), #0066ff); border: none; color: white; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 1rem; }
        .btn-cancel { background: none; color: #ff4444; border: none; width: 100%; padding: 10px; cursor: pointer; }

        /* M√âTODOS DE PAGO */
        .pay-method { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 10px; margin: 5px 0; display: flex; align-items: center; gap: 10px; font-size: 0.9rem; }
    </style>
</head>
<body>

    <!-- CABECERA -->
    <div class="header-v2">
        <div class="logo">ESTARLINHACKS <small style="color:var(--accent)">V2.5</small></div>
        <div class="config-btn" onclick="toggleSidebar()">‚öôÔ∏è</div>
    </div>

    <!-- MEN√ö LATERAL -->
    <div id="sidebar">
        <div style="text-align:right; font-size:1.5rem; cursor:pointer;" onclick="toggleSidebar()">‚úï</div>
        <h3 style="color:var(--neon); font-family: 'Orbitron';">OPCIONES</h3>
        <a href="#" class="menu-link" onclick="abrirModal('modal-recarga')">üí∞ Recargar Saldo</a>
        <a href="#" class="menu-link" onclick="alert('Historial vac√≠o')">üìÇ Mis Compras</a>
        <a href="#" class="menu-link" onclick="abrirModal('modal-metodos')">üí≥ M√©todos de Pago</a>
        <a href="https://wa.me/18493931148" class="menu-link">üõ†Ô∏è Soporte T√©cnico</a>
        <a href="https://www.instagram.com/tu_usuario" class="menu-link">üë§ Due√±o de la P√°gina</a>
        <a href="#" class="menu-link" style="color:var(--accent)" onclick="location.reload()">üîí Cerrar Sesi√≥n</a>
    </div>

    <!-- DASHBOARD -->
    <div class="dashboard">
        <div class="balance-card">
            <small>MI BALANCE ACTUAL</small>
            <div id="user-balance" class="val">$0.00</div>
            <button class="buy-btn" onclick="abrirModal('modal-recarga')">RECARGAR AHORA</button>
        </div>
    </div>

    <!-- MODAL RECARGA (CON FOTO) -->
    <div id="modal-recarga" class="modal">
        <div class="modal-box">
            <h3 style="color: var(--neon);">SUBIR COMPROBANTE</h3>
            <p style="font-size:0.8rem; color:#888;">Env√≠a el dinero por PayPal o Banco y sube la foto aqu√≠.</p>
            
            <label>Monto enviado ($):</label>
            <input type="number" id="monto-reporte" placeholder="Ej: 15.00">
            
            <label>Subir foto del pago:</label>
            <input type="file" id="foto-pago" accept="image/*" class="file-input">
            
            <button class="buy-btn" onclick="enviarPagoConFoto()">CONFIRMAR Y ENVIAR</button>
            <button class="btn-cancel" onclick="cerrarModal('modal-recarga')">ATR√ÅS</button>
        </div>
    </div>

    <!-- MODAL M√âTODOS DE PAGO -->
    <div id="modal-metodos" class="modal">
        <div class="modal-box">
            <h3 style="color: var(--neon);">M√âTODOS GLOBALES</h3>
            <div class="pay-method">üá™üá∏ <b>BIZUM / BANCOS EUROPA</b></div>
            <div class="pay-method">üá∫üá∏ <b>ZELLE / CASHAPP / PAYPAL</b></div>
            <div class="pay-method">üá≤üáΩ <b>OXXO / MERCADO PAGO</b></div>
            <div class="pay-method">üá®üá¥ <b>NEQUI / DAVIPLATA</b></div>
            <div class="pay-method">üá©üá¥ <b>POPULAR / RESERVAS</b></div>
            <div class="pay-method">üåç <b>BINANCE (USDT)</b></div>
            <button class="buy-btn" style="margin-top:20px;" onclick="cerrarModal('modal-metodos')">ENTENDIDO</button>
        </div>
    </div>

    <script>
        // CONFIGURACI√ìN FIREBASE
        const firebaseConfig = {
          apiKey: "AIzaSyCyfGnvZCaJbZQ54W31z6GQdIRQZc4Lk5A",
          authDomain: "estarlinhacks-af6cd.firebaseapp.com",
          projectId: "estarlinhacks-af6cd",
          storageBucket: "estarlinhacks-af6cd.firebasestorage.app",
          messagingSenderId: "815848600809",
          appId: "1:815848600809:web:92ec6140947813f3456c78"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        
        let userId = "Estarlin_User"; // Simulado

        function toggleSidebar() { document.getElementById('sidebar').classList.toggle('active'); }
        function abrirModal(id) { document.getElementById(id).style.display = 'block'; toggleSidebar(); }
        function cerrarModal(id) { document.getElementById(id).style.display = 'none'; }

        // ENVIAR PAGO
        function enviarPagoConFoto() {
            const monto = document.getElementById('monto-reporte').value;
            const foto = document.getElementById('foto-pago').files[0];

            if(!monto || !foto) {
                alert("Por favor pon el monto y sube la foto del recibo.");
                return;
            }

            // Guardamos en la base de datos para que lo veas en el Panel de Aprobaci√≥n
            db.collection("pagos_v2").add({
                usuario: userId,
                monto: parseFloat(monto),
                foto_nombre: foto.name,
                fecha: new Date().toLocaleString(),
                estado: "Revisando foto"
            }).then(() => {
                alert("¬°Comprobante enviado! Ahora te redirigiremos para avisar al due√±o.");
                // Redirige al email del due√±o
                window.location.href = `mailto:rosaquino261294@gmail.com?subject=NUEVO PAGO REPORTADO - ${userId}&body=Hola Estarlin, he enviado un pago de ${monto} USD. Por favor revisa el panel de aprobaci√≥n.`;
            });
        }

        // Cargar saldo real
        db.collection("usuarios").doc(userId).onSnapshot(doc => {
            if(doc.exists) document.getElementById('user-balance').innerText = "$" + doc.data().saldo.toFixed(2);
        });
    </script>
</body>
</html>
